[
  {
    "name": "Pokaż wszystkie niewypożyczone samochody",
    "query": "SELECT * FROM CAR WHERE AVAILABLE='true'"
  },
  {
    "name": "Dodaj samochód stacji",
    "query": "UPDATE CAR SET CAR_STATION_ID=1 WHERE ID=1"
  },
  {
    "name": "Pokaż samochody z przebiegiem większym niż zadany",
    "query": "SELECT * FROM CAR WHERE MILEAGE>276564.828"
  },
  {
    "name": "Samochody naprawione przez konkretne firmy",
    "query": "SELECT CAR.* FROM CAR JOIN DAMAGE ON CAR.ID=DAMAGE.CAR_ID JOIN INVOICE ON DAMAGE.INVOICE_ID=INVOICE.ID JOIN COMPANY ON INVOICE.COMPANY_ID=COMPANY.ID WHERE COMPANY.NAME IN ('Kanoodle', 'Avamm', 'Dabjam')"
  },
  {
    "name": "Przenies pracownika do innej stacji",
    "query": "UPDATE STATIONWORKER SET CAR_STATION_ID=1 WHERE CAR_STATION_ID=4"
  },
  {
    "name": "Przenieś wszystkie samochody do innej stacji",
    "query": "UPDATE CAR SET CAR_STATION_ID=1 WHERE CAR_STATION_ID=4"
  },
  {
    "name": "Usuń stację",
    "query": "DELETE CARSTATION WHERE ID=4"
  },
  {
    "name": "Wypożyczenie samochodu z dwoma wypożyczeniami",
    "query": "UPDATE RENTALHISTORY SET RATING=1 WHERE ID=462"
  },
  {
    "name": "Dodanie oceny do wypozyczenia wyzwala obliczenie nowej oceny dla samochodu, ktorego dotyczy wypozyczenie.",
    "query": "UPDATE CAR SET RATING=(SELECT AVG(RATING) FROM RENTALHISTORY WHERE CAR_ID=(SELECT CAR_ID FROM RENTALHISTORY WHERE ID=462)) WHERE ID=(SELECT CAR_ID FROM RENTALHISTORY WHERE ID=462)"
  },
  {
    "name": "Zmiana formatu daty",
    "query": "ALTER session set NLS_DATE_FORMAT='DD/MM/YYYY'"
  },
  {
    "name": "Uzytkownicy ktorzy wypozyczyli samochod w okreslonym przedziale czasowym w okreslonym miescie.",
    "query": "SELECT SYSTEMUSER.* FROM SYSTEMUSER JOIN RENTALHISTORY ON SYSTEMUSER.ID=RENTALHISTORY.USER_ID JOIN CARSTATION ON RENTALHISTORY.START_STATION_ID=CARSTATION.ID JOIN LOCATION ON CARSTATION.LOCATION_ID=LOCATION.ID WHERE RENTALHISTORY.START_DATE BETWEEN '01/01/2017' AND '31/12/2017' AND LOCATION.CITY='Asahi'"
  },
  {
    "name": "Uzytkownicy ktorzy spowodowali wiecej szkod niz przychodu",
    "query": "SELECT PAYMENTS.ID, PAYMENTS.DOCUMENT_TYPE_ID, PAYMENTS.TITLE, PAYMENTS.NAME, PAYMENTS.SURNAME, PAYMENTS.EMAIL, PAYMENTS.PHONE FROM ( SELECT SYSTEMUSER.ID, SYSTEMUSER.DOCUMENT_TYPE_ID, SYSTEMUSER.TITLE, SYSTEMUSER.NAME, SYSTEMUSER.SURNAME, SYSTEMUSER.EMAIL, SYSTEMUSER.PHONE, NVL(SUM(PAYMENT.COST*(100-PAYMENT.DISCOUNT)), 0) AS SUM FROM SYSTEMUSER LEFT JOIN RENTALHISTORY ON SYSTEMUSER.ID=RENTALHISTORY.USER_ID LEFT JOIN PAYMENT ON RENTALHISTORY.PAYMENT_ID=PAYMENT.ID GROUP BY SYSTEMUSER.ID, SYSTEMUSER.DOCUMENT_TYPE_ID, SYSTEMUSER.TITLE, SYSTEMUSER.NAME, SYSTEMUSER.SURNAME, SYSTEMUSER.EMAIL, SYSTEMUSER.PHONE ) PAYMENTS JOIN ( SELECT SYSTEMUSER.ID, NVL(SUM(INVOICE.SUMMARY_COST), 0) AS SUM FROM SYSTEMUSER LEFT JOIN RENTALHISTORY ON SYSTEMUSER.ID=RENTALHISTORY.USER_ID LEFT JOIN DAMAGE ON RENTALHISTORY.ID=DAMAGE.RENTAL_ID LEFT JOIN INVOICE ON DAMAGE.INVOICE_ID=INVOICE.ID GROUP BY SYSTEMUSER.ID ) DAMAGES ON PAYMENTS.ID=DAMAGES.ID WHERE DAMAGES.SUM>PAYMENTS.SUM"
  }
]